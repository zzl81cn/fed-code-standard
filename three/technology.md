为了规范前端团队的开发模式，提高代码质量及协作效率，优化前端性能及用户体验，特制定该前端技术规范文档，其中包括了前端技术栈，HTML，JavaScript，CSS/LESS/SCSS等几个部分。供前端同事参考及开发践行。

---

### 技术栈规范

> 种一棵树的最好时机是十年前，其次是现在。

在移动互联网时代，前端的技术体系日新月异。既有跟native结合的hybrid-app开发，也有像nodejs这样跟后端结合的工具，既有spa这种单页应用，也有react-native这种风头正劲的开发模式。作为一名前端技术人员，在条件允许的情况下，应与时俱进，尽可能多的对新技术，新工具，新思想，进行探究及实践。在提高开发效率、自身竞争力的同时，也为我们的用户提供更好的产品体验。

1. ### 前后端分离

传统的开发模式，由前端技术人员实现页面静态文件，然后去套服务器端模板，比如freemarker，velocity，razor等。这个工作可能是前端人员做，也有可能交给后端。前端很少做路由，页面的渲染也依赖于后端的"controller"，所有的控制都是交给后端来做的。这对于调试、问题定位，后续的维护和扩展，都是一个巨大的挑战。

而在前后端分离的模式下，后端专注于提供业务数据，维护系统架构的稳定，保证数据的安全，再将数据通过接口的方式暴露出来。前端人员通过接口获取数据，专注于交互，用户体验，快速响应UI的变化。这种明确职责的划分，对于问题定位，系统的可扩展性意义重大，同时也更容易发挥团队及个人所长。

在之前没有前后端分离的时代，很少有接口文档的说法，只有在Ajax的时候才会有一些，大部分都是后端在controller层去提供初始化数据。同样的业务逻辑，面对不同的终端实现，可能要写很多遍。在前后端分离的模式下，由于后端只关注于根据业务提供接口，因此实现了app端和web数据提供的统一。

2. ### h5宣介页面

常见的微信内传播页面、PC端宣介页面等都属于此范畴。该类页面的特点是轻业务，交互有通用性（比如动画，划屏等），以内容展示为主。对于此类页面：

* 桌面端推荐用 jquery，配合相关的效果插件，并注意考量相应的浏览器兼容性。
* 移动端推荐用 h5/css3，jquery | zepto 为基础进行构建。动画效果推荐使用定制化的 [animate.css](https://github.com/daneden/animate.css)，划动滚屏效果，推荐使用 [jquery.swiper.js](http://www.swiper.com.cn/) 实现。
* 移动端页面，需要考量加载资源的大小，进行首屏的加载进度处理。原则上，移动端页面打开时，禁止默认播放音乐。
* 不管是桌面端，还是移动端，发布时均需要进行资源打包处理。

3. ### react
依靠其颠覆性的技术理念，良好的社区支持，丰富的开源组件库，与react-native的一脉相承，国内诸多大厂的实践及推行，成为当前最热门最流行的前端开发框架，没有之一。

在满足实际工作需求的前提下，对于以下应用形态，可采用react进行开发：
>* 移动端混合型应用
>* 新的后端管理系统

而在具体的开发工作中，react相关的开发工作，可参考以下脚手架进行：
>* 路由组件：react-router
>* 数据流处理可使用：react-redux
>* ui库可使用：ant
>* 数据请求：fetch
>* 通用工具库：lodash
>* es6转码：babel
>* css预处理器：sass
>* 工程和自动化：webpack
>* 其它可扩充

4. ### 移动端应用

对于移动端应用，现有的开发模式分为以下几种：
* 原生 android & ios 开发。这种开发模式，实际上是需要专业的 android/ios 工程师去完成。其优点是应用体验好，开发模式成熟。缺点是需要用不同的代码去兼容不同的硬件平台，成本较高。同时，应用的更新依赖于安装包的下载，对需要快速变化的业务场景不是很友好。

* 混合型应用开发。此类开发模式包括了web-app 及 hybrid-app 开发模式。其优点是能利用现有的前端技术，实现跨平台的开发，同时兼具了web化的程序更新方式，对于快速响应业务的场景，以及频繁变更的数据展现，有天然的优势。缺点是相较原生应用，该类应用常常卡顿，不流畅，无法实现复杂的交互及动画效果，用户体验并不是很好。

* react-native & weex 等开发模式。以react-native为例，这种开发模式兼具了原生的性能体验与web化的开发和更新方式。其技术体系包括 react、flex、es6等，有效的利用了现有的前沿前端技术，构建跨终端的高性能移动端应用。加上其大公司的出身背景，活跃的社区，丰富的开源组件库，国内诸多大厂的技术跟进，react-native俨然已是当前最热门的移动端应用开发技术。

统合以上三种模式的优缺点，结合实际开发工作中的具体情况，并考虑到开发人员的配置和技术成长，对于新的移动端应用需求，尽可能摒弃混合型的开发方式，采用react-native技术体系进行开发工作。

后续会对react & react-native相关的技术体系及在国内的应用现状进行专题分享。并在可能的实践开发工作中，提供技术普及和支撑。

5. ### 前端自动化

所谓前端自动化，是指用工程化的手段，替换以前需要手动去处理的大量重复性工作。比如代码的压缩，合并，模板生成，状态监听等。鉴于其提供的便利及可靠性，自动化构建已经成了前端开发的趋势。

由于自动化工具往往需要结合具体的场景进行使用，以下代码演示了通过grunt，压缩指定js脚本并输出到指定目录的过程。执行该任务，只需要命令行定位到相关目录，执行 grunt dist 即可。
``` javascript
module.exports = function(grunt) {
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    uglify: {
      options: {
        banner: '/*! <%= pkg.name %> <%= grunt.template.today("yyyy-mm-dd") %> */\n'
      },
      build: {
        src: 'src/<%= pkg.name %>.js',
        dest: 'build/<%= pkg.name %>.min.js'
      }
    }
  });

  // 导入插件
  grunt.loadNpmTasks('grunt-contrib-uglify');

  // 注册任务
  grunt.registerTask('dist', ['uglify']);
};
```